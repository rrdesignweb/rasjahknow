---
import { contentfulClient } from "../lib/contentful";

interface MemberItem {
  contentTypeId: "bandMembers";
  fields: {
    name: string;
    instrument: string;
    image: {
      fields: {
        file: {
          url: string | undefined;
          title: string;
        };
      };
    };
    position: number;
  };
}

const entries = await contentfulClient.getEntries<MemberItem>({
  content_type: "bandMembers",
});
---

<div class="flex md:justify-between:flex-row flex-col items-start py-8">
  <h2 class="text-2xl font-medium uppercase">Band Members</h2>
  <p class="md:text-right:pt-0 pt-4">
    For bookings contact: Jorge Abreu <br />
    Phone: <a class="text-red-500 hover:text-red-700" href="tel:+61 416 652 906"
      >+61 416 652 906</a
    ><br />
    Email: <a
      class="text-red-500 hover:text-red-700"
      href="mailto:rasjahknowband@gmail.com">rasjahknowband@gmail.com</a
    >
  </p>
</div>
<div class="grid grid-cols-1 md:grid-cols-4 gap-x-4 gap-y-4">
  {
    entries &&
      entries.items
        .sort((a, b) => a.fields.position - b.fields.position)
        .map((item: any, i: number) => (
          <div>
            <img
              class="h-auto w-96 grayscale object-cover"
              src={item.fields.image.fields.file?.url}
              alt={item.fields.image.fields.file?.title}
            />
            <div class="p-4">
              <h3 class="font-medium text-lg">{item.fields.name}</h3>
              <p class="text-md">{item.fields.instrument}</p>
            </div>
          </div>
        ))
  }
</div>
